---
import { siteConfig } from "../../config";
---

<!-- About folder content -->
<div id="about-content" class="terminal-content hidden">
  <div class="terminal-line">
    <span class="prompt">portfolio@ryandielhenn:~/about$</span>
    <span class="command" id="about-command"></span>
  </div>
  
  <div class="file-content" id="about-content-body" style="opacity: 0; transform: translateY(20px); transition: opacity 0.5s ease, transform 0.5s ease;">
    <div class="simple-content">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h3 style="margin: 0;">About</h3>
               <button class="back-button" onclick="window.goBack && window.goBack()">
                 <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                   <path d="m12 19-7-7 7-7"/>
                   <path d="M19 12H5"/>
                 </svg>
               </button>
      </div>
      <p>{siteConfig.aboutMe}</p>
      
      <h4>Skills & Technologies</h4>
      <div class="skills-list">
        {siteConfig.skills.map(skill => (
          <span class="skill-item">{skill}</span>
        ))}
      </div>
      
      <h4>Areas of Expertise</h4>
      <div class="expertise-grid">
        <div class="expertise-item">
          <h5>Distributed Systems</h5>
          <p>Experience with Apache Kafka, asynchronous communication patterns, and fault-tolerant architectures.</p>
        </div>
        <div class="expertise-item">
          <h5>Data Science</h5>
          <p>Specializing in AI, machine learning, and data analysis techniques.</p>
        </div>
        <div class="expertise-item">
          <h5>Software Engineering</h5>
          <p>Backend development with focus on scalable, maintainable code.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Typing animation for about command
  function typeAboutCommand(element: HTMLElement, text: string, speed: number = 80) {
    // Prevent multiple animations
    if (element.classList.contains('typing') || element.classList.contains('typing-complete')) {
      return;
    }
    
    element.textContent = '';
    element.classList.add('typing');
    
    let i = 0;
    function type() {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
        setTimeout(type, speed);
      } else {
        element.classList.remove('typing');
        element.classList.add('typing-complete');
        
        // Show content after command finishes typing
        setTimeout(() => {
          const contentBody = document.getElementById('about-content-body');
          if (contentBody) {
            contentBody.style.opacity = '1';
            contentBody.style.transform = 'translateY(0)';
          }
        }, 300);
      }
    }
    
    type();
  }

  // Flag to prevent multiple initializations
  let aboutAnimationInitialized = false;

  // Initialize typing animation when about content becomes visible
  function initAboutAnimation() {
    if (aboutAnimationInitialized) {
      return;
    }
    
    const aboutCommand = document.getElementById('about-command');
    if (aboutCommand) {
      aboutAnimationInitialized = true;
      setTimeout(() => {
        typeAboutCommand(aboutCommand, 'whoami', 80);
      }, 500);
    }
  }

  // Listen for when about content becomes visible
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
        const target = mutation.target as HTMLElement;
        if (target.id === 'about-content' && !target.classList.contains('hidden')) {
          initAboutAnimation();
        }
      }
    });
  });

  document.addEventListener('DOMContentLoaded', () => {
    const aboutContent = document.getElementById('about-content');
    if (aboutContent) {
      observer.observe(aboutContent, { attributes: true });
      
      // If already visible, start animation
      if (!aboutContent.classList.contains('hidden')) {
        initAboutAnimation();
      }
    }
  });
</script>

<style>
  @import "../../styles/terminal.css";
</style>
