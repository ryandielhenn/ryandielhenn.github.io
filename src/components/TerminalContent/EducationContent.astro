---
import { siteConfig } from "../../config";
---

<!-- Education folder content -->
<div id="education-content" class="terminal-content hidden">
  <div class="terminal-line">
    <span class="prompt">portfolio@ryandielhenn:~/education$</span>
    <span class="command" id="education-command"></span>
  </div>
  
  <div class="file-content" id="education-content-body" style="opacity: 0; transform: translateY(20px); transition: opacity 0.5s ease, transform 0.5s ease;">
    <div class="simple-content">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h3 style="margin: 0;">Education</h3>
               <button class="back-button" onclick="window.goBack && window.goBack()">
                 <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                   <path d="m12 19-7-7 7-7"/>
                   <path d="M19 12H5"/>
                 </svg>
               </button>
      </div>
      <p>My academic background and achievements.</p>
      
      <div class="education-list">
        {siteConfig.education.map((edu, index) => (
          <div class="education-item">
            <div class="education-header">
              <h4>{edu.degree}</h4>
              <span class="education-date">{edu.dateRange}</span>
            </div>
            <h5 class="education-school">{edu.school}</h5>
            <ul class="education-achievements">
              {edu.achievements.map((achievement, achievementIndex) => (
                <li>{achievement}</li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </div>
</div>

<script>
  // Typing animation for education command
  function typeEducationCommand(element: HTMLElement, text: string, speed: number = 80) {
    // Prevent multiple animations
    if (element.classList.contains('typing') || element.classList.contains('typing-complete')) {
      return;
    }
    
    element.textContent = '';
    element.classList.add('typing');
    
    let i = 0;
    function type() {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
        setTimeout(type, speed);
      } else {
        element.classList.remove('typing');
        element.classList.add('typing-complete');
        
        // Show content after command finishes typing
        setTimeout(() => {
          const contentBody = document.getElementById('education-content-body');
          if (contentBody) {
            contentBody.style.opacity = '1';
            contentBody.style.transform = 'translateY(0)';
          }
        }, 300);
      }
    }
    
    type();
  }

  // Flag to prevent multiple initializations
  let educationAnimationInitialized = false;

  // Initialize typing animation when education content becomes visible
  function initEducationAnimation() {
    if (educationAnimationInitialized) {
      return;
    }
    
    const educationCommand = document.getElementById('education-command');
    if (educationCommand) {
      educationAnimationInitialized = true;
      setTimeout(() => {
        typeEducationCommand(educationCommand, 'cat degrees.txt', 80);
      }, 500);
    }
  }

  // Listen for when education content becomes visible
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
        const target = mutation.target as HTMLElement;
        if (target.id === 'education-content' && !target.classList.contains('hidden')) {
          initEducationAnimation();
        }
      }
    });
  });

  document.addEventListener('DOMContentLoaded', () => {
    const educationContent = document.getElementById('education-content');
    if (educationContent) {
      observer.observe(educationContent, { attributes: true });
      
      // If already visible, start animation
      if (!educationContent.classList.contains('hidden')) {
        initEducationAnimation();
      }
    }
  });
</script>

<style>
  @import "../../styles/terminal.css";
</style>
